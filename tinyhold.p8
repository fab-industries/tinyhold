pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
-- game loop

function _init()
 map_setup()
 make_cursor()
end

function _update()
 move_cursor()
end

function _draw()
 cls()
 draw_map()
 draw_cursor()
end
-->8
-- map code

function map_setup()
 -- sprite flags
 building=0
end

function draw_map()
 -- get the camera to follow
 -- the cursor
 mapx=flr(c.x/16)*16
 mapy=flr(c.y/16)*16
 camera(mapx*8,mapy*8)

 map (0,0,0,0,128,64)
end

function is_tile(tile_type,x,y)
 tile=mget(x,y)
 has_flag=fget(tile, tile_type)
 return has_flag
end
-->8
-- cursor code

function make_cursor()
 c={}
 c.x=3
 c.y=2
 c.sprite=16
end

function draw_cursor()
  spr(c.sprite,c.x*8,c.y*8)
end

function move_cursor()
 newx=c.x
 newy=c.y
 
 if (btnp(⬅️)) newx-=1
 if (btnp(➡️)) newx+=1
 if (btnp(⬆️)) newy-=1
 if (btnp(⬇️)) newy+=1
 
 c.x=mid(0,newx,127)
 c.y=mid(0,newy,63)
 
 if (is_tile(building,c.x,c.y)) then
  -- turn cursor yellow if on
  -- building tile
  c.sprite=32
 else
  c.sprite=16
 end
 
end
__gfx__
0000000033333333333bb3333333b3331111111133333333333333333393333933333333333a3333000000000000000000000000000000000000000000000000
000000003b3333b33bbbbbb33333333311111c113b3333b33b3333b3333393333333367333aaa333000000000000000000000000000000000000000000000000
007007003333b333bbbbbbbb355555331111c1c13323b3333333b333939339393c4307633aa0aa33000000000000000000000000000000000000000000000000
0007700033333333bbbbbbbb35555653111111113555333335033503393939333553333335a5aaa3000000000000000000000000000000000000000000000000
0007700033333333bbbbbbbb555565551111111133333333333333333939939933333673550aaaa5000000000000000000000000000000000000000000000000
00700700333333b33bbbbbbb5555555511c11111333353b3333503b393933939337630633550aa53000000000000000000000000000000000000000000000000
000000003b3333333bbb4bb3355555531c1c11113b3552333b333333393939393067333333555533000000000000000000000000000000000000000000000000
00000000333333333334443333333333111111113333333333333333393939333333333333355333000000000000000000000000000000000000000000000000
7700007733b333330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
70000007343334330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000333533330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000003353353b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000333343330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000b53533330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
70000007334333430000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
77000077333b33330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
aa0000aa33f433360000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
a000000a363336f30000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000433f33330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000033f43f340000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000364364330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000004f3f3f340000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
a000000a336333630000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
aa0000aa63343f340000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000000000000001010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0202020202020101010101050101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020201010101010101010101010600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020102010103010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201020101010101010505010301010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202010101030101010101060601010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201020103010101090921060101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010111111121010101070100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0201010103010101010101040401070700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010104040404070700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010105010106010104040404070700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010505010601010104040404070700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101080801010101010404040404070700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101040404040404070700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010104040404040407070700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000100000b00000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
